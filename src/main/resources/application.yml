springdoc:
  default-produces-media-type: application/json
  swagger-ui:
    path: /api-docs
    filter: false
    operations-sorter: method
spring:
  devtools:
    livereload:
      enabled: false
    restart:
      enabled: false
  datasource:
    hikari:
      pool-name: MyHikariCP
      minimum-idle: 5
      maximum-pool-size: 10
      idle-timeout: 600000  # 10 minutes
      max-lifetime: 1800000 # 30 minutes
      connection-timeout: 30000 # 30 seconds
      leak-detection-threshold: 30000 # 30 seconds
    url: ${DB_URL}
    driver-class-name: org.postgresql.Driver
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}
  #  h2:
  #    console:
  #      enabled: true
  #      path: /h2-console
  jpa:
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    hibernate:
      ddl-auto: update
  
  # Flyway 마이그레이션 안전 설정 (추가됨)
  flyway:
    enabled: true
    baseline-on-migrate: true
    clean-disabled: true  # 데이터 삭제 방지!
    fail-on-missing-locations: false
    validate-on-migrate: true

# 로깅 레벨 향상 (디버깅용 - 추가됨)
logging:
  level:
    org.flywaydb: DEBUG
    com.gk.happytteokordersystem: DEBUG